# Logrotate configuration for ShopIntel audit logs
# Installed in /etc/logrotate.d/shopintel-audit on the DGX Spark host
#
# Audit logs are JSONL files at /app/audit/audit_YYYY-MM-DD.jsonl
# They are also bind-mounted to the host at ./audit/ for backup.

/opt/shopintel/audit/*.jsonl {
    daily
    rotate 90
    compress
    delaycompress
    missingok
    notifempty
    dateext
    dateformat -%Y%m%d
    create 0640 root root
    sharedscripts
    postrotate
        # No signal needed -- audit.js opens files per-request
    endscript
}
